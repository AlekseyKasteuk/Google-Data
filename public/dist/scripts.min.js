var app=angular.module("GoogleData",["ui.router","ui.tinymce","ngMaterial","ngMessages"]);app.config(["$httpProvider","$urlRouterProvider","$stateProvider","$locationProvider","$mdIconProvider","$mdThemingProvider",function(t,e,o,a,r,i){e.otherwise("/"),o.state("login",{url:"/login",templateUrl:"application/states/login/login.html",controller:"LoginCtrl"}).state("app",{url:"/",templateUrl:"application/states/app/app.html",controller:"AppCtrl"}),i.theme("default").primaryPalette("blue").accentPalette("indigo")}]),app.run(["$rootScope","$state","$stateParams","authService",function(t,e,o,a){t.$on("$stateChangeStart",function(o,r,i){a.checkAuth().success(function(o){t.authorizedUser=o,console.log(o),"login"==r.name&&e.go("app")}).error(function(){t.authorizedUser=void 0,"login"!=r.name&&e.go("login")})})}]);
app.factory("authService",["$http",function(t){return{login:function(n){return t.post("/login",n)},logout:function(){return t.post("/logout")},checkAuth:function(){return t.get("/auth/check")},createNewAccount:function(n){return t.post("/create/account",n)}}}]);
app.factory("socket",["$rootScope",function(n){var o=io.connect();return{on:function(t,c){o.on(t,function(){var t=arguments;n.$apply(function(){c.apply(o,t)})})},emit:function(t,c,p){o.emit(t,c,function(){var t=arguments;n.$apply(function(){p&&p.apply(o,t)})})}}}]);
app.controller("AppCtrl",["$scope","socket","$state","authService",function(t,i,n,e){t.logout=function(){e.logout().success(function(){n.go("login")})},i.on("authorization_faild",function(){n.go("login")}),t.tinymceOptions={onChange:function(t){console.log(t)},inline:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks fullscreen media","insertdatetime table contextmenu paste"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",skin:"lightgray",theme:"modern",statusbar:!1,width:450,height:455}}]);
app.controller("LoginCtrl",["$scope","authService","$mdDialog","$state","$mdToast",function(t,e,n,o,c){t.user={},t.login=function(){e.login(t.user).success(function(){o.go("app")}).error(function(t){c.show(c.simple().textContent(t).action("OK").highlightAction(!1).position("top left"))})},t.showAlert=function(t){n.show({controller:"createNewAccountCtrl",templateUrl:"application/states/login/create_new_account.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0}).then(function(t){c.show(c.simple().textContent(t+" was created").action("OK").highlightAction(!1).position("top left"))})}}]).controller("createNewAccountCtrl",["$scope","$mdDialog","authService",function(t,e,n){t.user={},t.hide=function(){e.hide()},t.cancel=function(){e.cancel()},t.answer=function(){n.createNewAccount(t.user).success(function(){e.hide(t.user.first_name+" "+t.user.last_name)}).error(function(){})}}]);
app.controller("EmailCtrl",function(){});
